name: sdd-tasks
description: SDD Phase 3 - 要件と設計に基づく実装タスクリストを生成する
piece_config:
  provider_options:
    codex:
      network_access: true
    opencode:
      network_access: true
max_movements: 10
initial_movement: generate-tasks

policies:
  sdd-tasks: ../policies/sdd-tasks.md

instructions:
  generate-tasks: ../instructions/generate-tasks.md

report_formats:
  sdd-tasks: ../output-contracts/sdd-tasks.md

movements:
  - name: generate-tasks
    edit: true
    persona: planner
    policy: sdd-tasks
    knowledge: architecture
    allowed_tools:
      - Read
      - Glob
      - Grep
      - Write
      - Bash
    required_permission_mode: edit
    instruction: generate-tasks
    output_contracts:
      report:
        - name: tasks.md
          format: sdd-tasks
    rules:
      - condition: タスク分解完了、全要件カバー
        next: COMPLETE
      - condition: 要件または設計が見つからない
        next: ABORT
